# WebRTC Video Call Application

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ WebRTC —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Supabase –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–¢—Ä–µ–±—É–µ—Ç—Å—è: Node.js & npm - [—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å nvm](https://github.com/nvm-sh/nvm#installing-and-updating)

```sh
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <YOUR_GIT_URL>

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd <YOUR_PROJECT_NAME>

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm i

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run dev
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Vite
- TypeScript
- React
- shadcn-ui
- Tailwind CSS
- WebRTC
- Supabase (Realtime –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## üî¥ –í–ê–ñ–ù–û: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TURN —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º–∏ TURN —Å–µ—Ä–≤–µ—Ä–∞–º–∏

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ TURN —Å–µ—Ä–≤–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –ü–û–î–•–û–î–Ø–¢ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!**

–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ TURN —Å–µ—Ä–≤–µ—Ä—ã –∏–º–µ—é—Ç —Å–µ—Ä—å–µ–∑–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- üî¥ **–ù–µ–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: —á–∞—Å—Ç–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- üî¥ **–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ/—Ä–µ–≥–∏–æ–Ω–µ
- üî¥ **–ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- üî¥ **–ù–µ—Ç SLA**: –Ω–∏–∫–∞–∫–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏–π —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- üî¥ **–õ–∏–º–∏—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞**: –∂–µ—Å—Ç–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö
- üî¥ **–ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å VPN**: —á–∞—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è VPN-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã TURN —Å–µ—Ä–≤–µ—Ä—ã?

TURN —Å–µ—Ä–≤–µ—Ä—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö:

1. **VPN** - –æ–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç VPN
2. **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–µ—Ç—å** - —Å—Ç—Ä–æ–≥–∏–µ firewall –∏ NAT –ø—Ä–∞–≤–∏–ª–∞
3. **CGNAT** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Carrier-grade NAT (–º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ ISP)
4. **–°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π NAT** - —Å–∞–º—ã–π —Å—Ç—Ä–æ–≥–∏–π —Ç–∏–ø NAT, –±–ª–æ–∫–∏—Ä—É–µ—Ç P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
5. **–†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö —Å —Ä–∞–∑–ª–∏—á–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

–í —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä—è–º–æ–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ**, –∏ –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ TURN relay —Å–µ—Ä–≤–µ—Ä.

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

**–í–ê–ñ–ù–û:** –í—Å–µ TURN credentials —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
   ```bash
   cp .env.example .env
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ TURN server credentials:

```env
# TURN Server Configuration
VITE_TURN_SERVER_URL="turn:your-turn-server.com:443"
VITE_TURN_SERVER_USERNAME="your-username"
VITE_TURN_SERVER_CREDENTIAL="your-password"

# Optional: Secondary TURN server (for redundancy)
VITE_TURN_SERVER_URL_2="turn:your-turn-server.com:443?transport=tcp"
VITE_TURN_SERVER_USERNAME_2="your-username"
VITE_TURN_SERVER_CREDENTIAL_2="your-password"
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ Credentials –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ
- ‚úÖ –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –†–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è dev/staging/production
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: `.env` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è –¥–µ–ø–ª–æ—è:**
- –î–ª—è production –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞ (Vercel, Netlify, –∏ —Ç.–¥.)
- **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ** `.env` —Ñ–∞–π–ª –≤ git! –§–∞–π–ª —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–ª–∞—Ç–Ω—ã–µ –æ–±–ª–∞—á–Ω—ã–µ TURN —Å–µ—Ä–≤–∏—Å—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 1.1. Metered.ca (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ: 50GB/–º–µ—Å—è—Ü
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å–µ—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- WebRTC-—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: [https://www.metered.ca/](https://www.metered.ca/)
2. –ü–æ–ª—É—á–∏—Ç–µ credentials –∏–∑ –¥–∞—à–±–æ—Ä–¥–∞
3. –î–æ–±–∞–≤—å—Ç–µ credentials –≤ `.env` —Ñ–∞–π–ª:

```env
VITE_TURN_SERVER_URL="turn:a.relay.metered.ca:443"
VITE_TURN_SERVER_USERNAME="YOUR_METERED_USERNAME"
VITE_TURN_SERVER_CREDENTIAL="YOUR_METERED_CREDENTIAL"

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π TURN –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
VITE_TURN_SERVER_URL_2="turn:a.relay.metered.ca:443?transport=tcp"
VITE_TURN_SERVER_USERNAME_2="YOUR_METERED_USERNAME"
VITE_TURN_SERVER_CREDENTIAL_2="YOUR_METERED_CREDENTIAL"
```

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ URL –≤ VITE_TURN_SERVER_URL, —Ä–∞–∑–¥–µ–ª—è—è –∏—Ö –∑–∞–ø—è—Ç—ã–º–∏.

**–¶–µ–Ω—ã:** –æ—Ç $0 (50GB) –¥–æ $99/–º–µ—Å—è—Ü (1TB)

#### 1.2. Xirsys

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ WebRTC
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
- –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: [https://xirsys.com/](https://xirsys.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª –≤ –¥–∞—à–±–æ—Ä–¥–µ
3. –ü–æ–ª—É—á–∏—Ç–µ credentials
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
VITE_TURN_SERVER_URL="turn:your-channel.xirsys.com:443"
VITE_TURN_SERVER_USERNAME="YOUR_XIRSYS_USERNAME"
VITE_TURN_SERVER_CREDENTIAL="YOUR_XIRSYS_CREDENTIAL"
```

**–¶–µ–Ω—ã:** –æ—Ç $10/–º–µ—Å—è—Ü

#### 1.3. Twilio Network Traversal Service

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- Enterprise-—É—Ä–æ–≤–µ–Ω—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ Twilio —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

1. –ü–æ–ª—É—á–∏—Ç–µ TURN credentials —á–µ—Ä–µ–∑ Twilio API
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# Twilio –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ñ–µ–º–µ—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, –∏—Ö –Ω—É–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å
# —á–µ—Ä–µ–∑ API –∏ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ü—Ä–∏–º–µ—Ä –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö credentials:
VITE_TURN_SERVER_URL="turn:global.turn.twilio.com:3478"
VITE_TURN_SERVER_USERNAME="YOUR_TWILIO_USERNAME"
VITE_TURN_SERVER_CREDENTIAL="YOUR_TWILIO_CREDENTIAL"
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è Twilio —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–ª—É—á–∞—Ç—å —ç—Ñ–µ–º–µ—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ –∏—Ö API –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–≤–æ–Ω–∫–æ–º –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–¶–µ–Ω—ã:** pay-as-you-go, ~$0.001 –∑–∞ –º–∏–Ω—É—Ç—É

#### 1.4. VideoSDK

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ
- TURN —Å–µ—Ä–≤–µ—Ä—ã –≤–∫–ª—é—á–µ–Ω—ã
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: [https://www.videosdk.live/](https://www.videosdk.live/)
2. –ü–æ–ª—É—á–∏—Ç–µ TURN credentials
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
VITE_TURN_SERVER_URL="turn:turn.videosdk.live:3478"
VITE_TURN_SERVER_USERNAME="YOUR_VIDEOSDK_USERNAME"
VITE_TURN_SERVER_CREDENTIAL="YOUR_VIDEOSDK_CREDENTIAL"
```

**–¶–µ–Ω—ã:** –æ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π coturn —Å–µ—Ä–≤–µ—Ä (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ VPS

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- VPS —Å –º–∏–Ω–∏–º—É–º 2GB RAM, 2 CPU cores
- Ubuntu 20.04+ –∏–ª–∏ Debian 11+
- –ü—É–±–ª–∏—á–Ω—ã–π IP –∞–¥—Ä–µ—Å
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã: 3478 (UDP/TCP), 5349 (UDP/TCP), 49152-65535 (UDP)

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ coturn –Ω–∞ Ubuntu

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ coturn
sudo apt update
sudo apt install coturn -y

# 2. –í–∫–ª—é—á–µ–Ω–∏–µ coturn
sudo nano /etc/default/coturn
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ: TURNSERVER_ENABLED=1

# 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
sudo nano /etc/turnserver.conf
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `/etc/turnserver.conf`:**

```conf
# –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ
listening-ip=0.0.0.0
listening-port=3478
tls-listening-port=5349

# –ü—É–±–ª–∏—á–Ω—ã–π IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
external-ip=YOUR_SERVER_PUBLIC_IP

# –î–∏–∞–ø–∞–∑–æ–Ω relay –ø–æ—Ä—Ç–æ–≤
min-port=49152
max-port=65535

# Realm (–¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
realm=yourdomain.com

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
verbose
log-file=/var/log/turnserver.log

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
lt-cred-mech
user=username:password

# –î–ª—è –∑–∞—â–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ fingerprint
fingerprint

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# userdb=/var/lib/turn/turndb

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–ø—Ä–æ—Ç–∏–≤ DDoS)
max-bps=1000000
total-quota=100
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL/TLS (–¥–ª—è –ø–æ—Ä—Ç–∞ 5349):**

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt
sudo apt install certbot -y
sudo certbot certonly --standalone -d turn.yourdomain.com

# –£–∫–∞–∂–∏—Ç–µ –≤ /etc/turnserver.conf:
# cert=/etc/letsencrypt/live/turn.yourdomain.com/cert.pem
# pkey=/etc/letsencrypt/live/turn.yourdomain.com/privkey.pem
```

**–ó–∞–ø—É—Å–∫:**

```bash
sudo systemctl restart coturn
sudo systemctl enable coturn

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status coturn

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo tail -f /var/log/turnserver.log
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ coturn:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç: [https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/](https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/)

–ò–ª–∏ —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã:
```bash
npm install -g turn-test
turn-test YOUR_SERVER_IP 3478 username password
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ coturn —Å–µ—Ä–≤–µ—Ä–∞, –¥–æ–±–∞–≤—å—Ç–µ credentials –≤ `.env` —Ñ–∞–π–ª:

```env
VITE_TURN_SERVER_URL="turn:YOUR_SERVER_IP:3478"
VITE_TURN_SERVER_USERNAME="username"
VITE_TURN_SERVER_CREDENTIAL="password"

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–±–∞–≤—å—Ç–µ TCP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
VITE_TURN_SERVER_URL_2="turn:YOUR_SERVER_IP:3478?transport=tcp"
VITE_TURN_SERVER_USERNAME_2="username"
VITE_TURN_SERVER_CREDENTIAL_2="password"
```

**–î–ª—è TLS (–ø–æ—Ä—Ç 5349):**

```env
VITE_TURN_SERVER_URL="turns:YOUR_SERVER_IP:5349"
VITE_TURN_SERVER_USERNAME="username"
VITE_TURN_SERVER_CREDENTIAL="password"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–û–±–∞ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä—è–º–æ–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (host candidates)
   - –¢–µ—Å—Ç: –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –≤ –æ–¥–Ω–æ–π Wi-Fi —Å–µ—Ç–∏

2. **–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ VPN**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TURN relay
   - –¢–µ—Å—Ç: –≤–∫–ª—é—á–∏—Ç–µ VPN –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏: –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è "relay" candidates

3. **–û–±–∞ –∑–∞ VPN –∏–ª–∏ –º–æ–±–∏–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TURN relay
   - –¢–µ—Å—Ç: –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å VPN –∏–ª–∏ –æ–¥–∏–Ω –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º 4G/5G
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—é—â–∏–π TURN —Å–µ—Ä–≤–µ—Ä

4. **–†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã/–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã**
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ P2P, —Ç–∞–∫ –∏ relay
   - –¢–µ—Å—Ç: –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–ª–ª–µ–≥—É/–¥—Ä—É–≥–∞ –∏–∑ –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

**–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**

```
‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
- "TURN relay candidate gathered"
- "relay" –≤ candidate breakdown
- "Connection established successfully"

üî¥ –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
- "NO RELAY CANDIDATES GATHERED"
- "ICE connection failed"
- "All connectivity checks failed"
- –¢–æ–ª—å–∫–æ "host" –∏ "srflx" –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –±–µ–∑ "relay"
```

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è:**

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| NO RELAY CANDIDATES | TURN —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials, —Å–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å |
| ICE connection failed | –í—Å–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã | –í–∫–ª—é—á–∏—Ç–µ TURN relay, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ firewall |
| Connection timeout | Signaling –ø—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ |
| Works without VPN, fails with VPN | TURN –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π TURN —Å–µ—Ä–≤–∏—Å |

---

## üïê –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ (30+ –º–∏–Ω—É—Ç)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤:

### 1. WebRTC Data Channel Keepalive üíì

**–ü—Ä–æ–±–ª–µ–º–∞:** WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞–∑—Ä—ã–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ inactivity timeout –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö –∏ NAT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π heartbeat –º–µ—Ö–∞–Ω–∏–∑–º:
- –°–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π data channel —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è keepalive –ø–∏–Ω–≥–æ–≤
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç heartbeat –∫–∞–∂–¥—ã–µ **10 —Å–µ–∫—É–Ω–¥**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–æ–≤ (audio/video)
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ NAT bindings –∏–∑-–∑–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π: –æ–±–∞ –ø–∏—Ä–∞ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ heartbeat –ø–∏–Ω–≥–∏

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ VideoCall.tsx:
const dataChannel = peerConnection.createDataChannel('keepalive');
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
setInterval(() => {
  dataChannel.send(JSON.stringify({ type: 'heartbeat', timestamp: Date.now() }));
}, 10000);
```

### 2. Supabase Realtime Channel Heartbeat üì°

**–ü—Ä–æ–±–ª–µ–º–∞:** Supabase Realtime channels –º–æ–≥—É—Ç —Ç–∞–π–º–∞—É—Ç–∏—Ç—å –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ presence:
- –û–±–Ω–æ–≤–ª—è–µ—Ç presence —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥—ã–µ **20 —Å–µ–∫—É–Ω–¥**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å signaling –∫–∞–Ω–∞–ª–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç TIMED_OUT –æ—à–∏–±–∫–∏ Supabase
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–∞—Ö

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ presence –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥:
setInterval(async () => {
  await channel.track({ 
    online_at: new Date().toISOString(),
    heartbeat: true 
  });
}, 20000);
```

### 3. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π ICE Candidate Pool üîÑ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é.

**–†–µ—à–µ–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—É–ª –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤:
- `iceCandidatePoolSize: 255` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –°–æ–±–∏—Ä–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø—É—Ç–µ–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Ç–æ–ø–æ–ª–æ–≥–∏–π (VPN, CGNAT, corporate NAT)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è üîß

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫.

**–†–µ—à–µ–Ω–∏–µ:** –£–º–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
- –î–æ **3 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- **ICE restart** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (1s, 2s, 4s)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏:

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π | –° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ |
|----------|----------------|-----------------|
| –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–µ—Ç—å | 10-15 –º–∏–Ω—É—Ç | 30+ –º–∏–Ω—É—Ç ‚úÖ |
| VPN / NAT | 1-5 –º–∏–Ω—É—Ç | 30+ –º–∏–Ω—É—Ç ‚úÖ |
| –ú–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç | < 5 –º–∏–Ω—É—Ç | 20-30 –º–∏–Ω—É—Ç ‚úÖ |
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–∏ | –†–∞–∑—Ä—ã–≤ ‚ùå | –ê–≤—Ç–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚úÖ |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:

1. ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π TURN —Å–µ—Ä–≤–µ—Ä** (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è VPN/–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–π)
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ TURN —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ UDP, —Ç–∞–∫ –∏ TCP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã –¥–ª—è TURN
4. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ firewall –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç WebRTC —Ç—Ä–∞—Ñ–∏–∫
5. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ quality of service —á–µ—Ä–µ–∑ `getStats()` API

### –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üíì Heartbeat sent              # WebRTC data channel keepalive
üíì Heartbeat received from peer # –û—Ç–≤–µ—Ç –æ—Ç —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
üíì Channel heartbeat sent       # Supabase Realtime keepalive
‚úÖ Connection maintained for 00:32:15 # –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –¢–∏–ø—ã —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä—ã –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- –¢–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (P2P/relay)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É connection/ICE —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

// 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ candidates
peerConnection.getStats(null).then(stats => {
  stats.forEach(report => {
    if (report.type === 'local-candidate') {
      console.log(report);
    }
  });
});

// 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
peerConnection.getStats(null).then(stats => {
  stats.forEach(report => {
    if (report.type === 'candidate-pair' && report.state === 'succeeded') {
      console.log('Active pair:', report);
    }
  });
});

// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ TURN
peerConnection.getStats(null).then(stats => {
  stats.forEach(report => {
    if (report.type === 'candidate-pair' && report.state === 'succeeded') {
      console.log('Using relay?', 
        report.localCandidate?.candidateType === 'relay' || 
        report.remoteCandidateType === 'relay'
      );
    }
  });
});
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env –¥–ª—è credentials** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```env
   VITE_TURN_SERVER_URL="turn:your-server.com:443"
   VITE_TURN_SERVER_USERNAME="your-username"
   VITE_TURN_SERVER_CREDENTIAL="your-password"
   ```
   
   Credentials –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `.env` —Ñ–∞–π–ª–∞ –≤ `VideoCall.tsx`:
   ```javascript
   const turnServerUrl = import.meta.env.VITE_TURN_SERVER_URL;
   const turnUsername = import.meta.env.VITE_TURN_SERVER_USERNAME;
   const turnCredential = import.meta.env.VITE_TURN_SERVER_CREDENTIAL;
   ```

2. **üîí –ó–∞—â–∏—Ç–∞ .env —Ñ–∞–π–ª–∞:**
   - `.env` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –µ–≥–æ –≤ git
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
   - –î–ª—è production –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞ (Vercel, Netlify, etc.)

3. **‚è±Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ credentials** (advanced):
   - –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ —Ç–æ–∫–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - Twilio –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç—Ñ–µ–º–µ—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
   - –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ credentials

4. **üõ°Ô∏è –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ TURN** (–¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ coturn):
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ IP whitelist
   - –í–∫–ª—é—á–∏—Ç–µ rate limiting
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ strong passwords –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ max-bps –∏ total-quota –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ coturn

5. **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç—Ä–∞—Ñ–∏–∫–æ–º –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

6. **üîÑ –î–ª—è production –¥–µ–ø–ª–æ—è:**
   - Vercel: Settings ‚Üí Environment Variables ‚Üí –¥–æ–±–∞–≤—å—Ç–µ `VITE_TURN_SERVER_*`
   - Netlify: Site settings ‚Üí Build & deploy ‚Üí Environment ‚Üí –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - Custom VPS: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ permissions (`chmod 600 .env`)

---

## üåç –í—ã–±–æ—Ä TURN –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

| –†–µ–≥–∏–æ–Ω | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | –ü—Ä–∏—á–∏–Ω–∞ |
|--------|--------------|---------|
| üá∑üá∫ –†–æ—Å—Å–∏—è / –°–ù–ì | –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π coturn –Ω–∞ VPS | –ú–Ω–æ–≥–∏–µ –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å |
| üá™üá∫ –ï–≤—Ä–æ–ø–∞ | Metered.ca, Xirsys | –•–æ—Ä–æ—à–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| üá∫üá∏ –°–®–ê | Twilio, Metered.ca | Enterprise –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å |
| üá®üá≥ –ö–∏—Ç–∞–π | –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π coturn | Great Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |
| üåè –ê–∑–∏—è | VideoSDK, Metered.ca | –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ —Ä–µ–≥–∏–æ–Ω–µ –¥–ª—è –Ω–∏–∑–∫–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ |

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ TURN –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

‚úÖ **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å** - –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å < 50ms –∏–¥–µ–∞–ª—å–Ω–æ  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ UDP –∏ TCP** - TCP –∫–∞–∫ fallback –¥–ª—è —Å—Ç—Ä–æ–≥–∏—Ö firewall  
‚úÖ **Unlimited –∏–ª–∏ –≤—ã—Å–æ–∫–∏–µ –ª–∏–º–∏—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞** - –≤–∏–¥–µ–æ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ bandwidth  
‚úÖ **Uptime SLA 99.9%+** - –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è production  
‚úÖ **WebRTC-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏—á–∏** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

---

## üöÄ –î–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TURN —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π TURN —Å–µ—Ä–≤–∏—Å (–Ω–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ)  
‚úÖ Credentials —Ö—Ä–∞–Ω–∏—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è  
‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (VPN, NAT, –º–æ–±–∏–ª—å–Ω—ã–π)  
‚úÖ –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TURN  
‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –ø–ª–∞–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [WebRTC –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://webrtc.org/getting-started/overview)
- [–ü–æ–Ω–∏–º–∞–Ω–∏–µ ICE, STUN –∏ TURN](https://webrtc.org/getting-started/peer-connections)
- [coturn –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub](https://github.com/coturn/coturn)
- [Metered.ca –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.metered.ca/docs)
- [Xirsys –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.xirsys.com/)
- [Twilio Network Traversal](https://www.twilio.com/docs/stun-turn)

---

## ‚ùì FAQ

**Q: –ü–æ—á–µ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç?**  
A: –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ NAT/firewall timeout. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ keepalive –º–µ—Ö–∞–Ω–∏–∑–º—ã (WebRTC data channel heartbeat –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ + Supabase presence heartbeat –∫–∞–∂–¥—ã–µ 20 —Å–µ–∫—É–Ω–¥). –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ TURN —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**Q: –ü–æ—á–µ–º—É –º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–æ–≥–¥–∞, –∞ –∏–Ω–æ–≥–¥–∞ –Ω–µ—Ç?**  
A: –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ TURN —Å–µ—Ä–≤–µ—Ä—ã –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π coturn.

**Q: –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ VPN, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å VPN. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?**  
A: –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - VPN –±–ª–æ–∫–∏—Ä—É–µ—Ç P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π TURN —Å–µ—Ä–≤–µ—Ä. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã "relay" ICE –∫–∞–Ω–¥–∏–¥–∞—Ç—ã. –ë–µ–∑ TURN —Å–µ—Ä–≤–µ—Ä–∞ VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã.

**Q: –ö–∞–∫ –¥–æ–ª–≥–æ –º–æ–∂–µ—Ç –¥–ª–∏—Ç—å—Å—è –∑–≤–æ–Ω–æ–∫?**  
A: –° –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ keepalive –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ - 30+ –º–∏–Ω—É—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. –î–ª—è –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π TURN —Å–µ—Ä–≤–µ—Ä –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

**Q: –ù—É–∂–µ–Ω –ª–∏ TURN –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏?**  
A: –ù–µ—Ç, –¥–ª—è –æ–¥–Ω–æ–π —Å–µ—Ç–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ STUN. –ù–æ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ VPN/–º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª—É—á—à–µ –∏–º–µ—Ç—å TURN –∫–∞–∫ fallback.

**Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç TURN –¥–ª—è 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?**  
A: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–≤–æ–Ω–∫–æ–≤. ~100-200$/–º–µ—Å—è—Ü –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (Metered.ca). –ò–ª–∏ ~50$/–º–µ—Å—è—Ü –∑–∞ VPS –¥–ª—è —Å–≤–æ–µ–≥–æ coturn.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ TURN —Å–µ—Ä–≤–µ—Ä–æ–≤?**  
A: –î–∞! –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –º–∞—Å—Å–∏–≤ `iceServers` –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π WebRTC –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
